# Анализ оттока клиентов банка «Метанпром»
Выпускной проект

Выпускной проект проходит в формате буткемпа:  
  >«Во время выполнения проекта вы будете джуниор-аналитиком, который решает первые серьёзные задачи от крупных заказчиков. Работать вам предстоит как над крупным проектом, так и над небольшими задачами — всё как в жизни. В основном вы общаетесь со своим руководителем — тимлидом. Он ставит задачи, даёт обратную связь, оценивает результаты работы.»

Выпускной проект состоит из трех частей:
1. Декомпозиция
2. Основная часть, которая включает в себя:
  * Исследование в Jupyter Notebook,
  * Презентацию в формате PDF.
3. Работа с SQL

## 1 Часть - Декомпозиция

### Задача
Необходимо ознакомиться с пославленной задачей, составить четкий план работ и согласовать его с руководителем.

### Результаты декомпозиции
Был составлен и согласован следующий план работ:
1. Загрузка данных и подготовка к исследованию(анализ пропусков и их кодирование)  \
   1.1. Открытие файла с данными и изучение общей информации.
   * Вывод первых 10 строк датасета;
   * Вызов метода `info()`;
   * Ознакомление с данными, представленными в датасете;
   * Опредение количества пропущенных значений.
   
   1.2. Предобработка данных.
   * Замена названий столбцов. Приведение к единому регистру.
   * Обработка пропущенных значений. Строки, с пропущенными значениями в столбце `age` удалим, т.к. их очень мало относительно общего количества строк. Строки, с пропущенными значениями в столбце `balance` оставим, т.к. их много и мы не можем их удалить, не исказив данные. Вместо пропущенных значений поставим "заглушку".
   * Изменим тип данных для столбцов `score`, `age`.
   * Проверим столбцы на наличие аномальных значений. Н-р в столбце `products` есть значение 0. Эту строку удалим.
   * Проверим на дубликаты. Особенно по столбцу `USERID`.
   * Добавим новые столбцы (по городам). Кодирование.  \

   1.3. Проведем проверку полученного датасета.
   * Как много даных было удалено?
   * Проверим целостность полученного датасета.

2. Исследовательский анализ данных  \
   2.1. Сравнение портретов типичных клиентов
   * Через сводные таблицы можно выполним группировку пользователей по различным признакам.
   * Разобьем клиентов на 2 группы по столбцу churn и посмотрим, какие есть различия между этими группами. Н-р по наличию кредитной карты, активный клиент или нет, медианное и среднее значение денег на счету.
   
   2.2. Распределение непрерывных, в т.ч. в разрезе оттока.
   * Построим график распределения через нормированную гистограмму.
   
   2.3. Уровни оттока по категориям.
   * Определим, что характерно для отточных клиентов (пол, кредитка, возраст).
  
   2.4. Корреляционный анализ.

3. Проверка статистических гипотез
    * Проверим гипотезу различия дохода между теми клиентами, которые ушли и теми, которые остались.
    * Проверим гипотезу о том, что женщины более склонны к уходу, чем мужчины.

4. Промежуточный итог о том, какие показатели стратегически влияют на отток.

5. Сегментация на основе стратегических показателей
    * Выделим как минимум 3 сегмента. Размер каждого сегмента должен составлять не менее 300 человек и не более 2000. После чего мы посчитаем размер и отток сегментов и приоритезируем их.

6. Выводы и рекомендации для заказчика
    * Сформулируем вывод по результатам проведенного исследования;
    * Сформулируем конкретные реккомендации по приоритетным сегментам для нашего заказчика;
    * Сформулируем личные реккомендации по сбору данных и работе данной системы банка.


## 2 Часть - Основная

### Задача
В банке последнее время драматически повысился отток клиентов и это начинает становиться проблемой, которая угрожает существованию банка. Однако, в связи с тем, что привлекать новых клиентов дорого, дешевле будет удержать тех, про которых мы уже что-то знаем и с которыми работаем.

Заказчиком исследования выступает менеджер из нашего отдела маркетинга. В отделе маркетинга нет автоматизированных систем рассылок, письма каждому клиенту пишутся вручную, поэтому важно для отдела маркетинга представить компактные однородные сегменты и дать примеры мероприятий, которые можно провести, чтобы вернуть клиентов в банк или удержать сомневающихся от оттока.

Раньше проводилось исследование, но оно устарело и по нему сейчас не ясно, в чём сейчас заключается проблема и как её можно решать. Состав клиентов банка изменился и старые сегменты больше не подходят. в связи с чем в моё распоряжение был предоставлен новый датасет. 

## Данные
Датасет содержит данные о клиентах банка «Метанпром».

### 2.1. - Исследование в Jupyter Notebook

#### Результаты исследования
Результаты оформленны в виде отчета в тетрадке Jupyter Notebook. [Ссылка на тетрадку]()

### 2.2. - Презентация в формате PDF
[Ссылка на презентацию]()

## 3 Часть - Работа с SQL
### Описание
На дворе коронавирус и все жители вынуждены "сидеть" на самоизоляции. Благодаря этому люди начали больше времени уделать книгам.
Я являюсь сотрудником фирмы, которая купила сервис для чтения книг по подписке. Мне необходимо проанализировать базу данных этого сервиса.

### Задача
Ответить на поставленные вопросы, чтобы с помощью полученной информации, мои коллеги в дальнейшем смогли сформулировать ценностное предложение для нового продукта. Для этого необходимо выполнить следующие задания:
* Посчитать, сколько книг вышло после 1 января 2000 года;
* Для каждой книги посчитать количество обзоров и среднюю оценку;
* Определить издательство, которое выпустило наибольшее число книг толще 50 страниц — так мы исключим из анализа брошюры;
* Определим автора с самой высокой средней оценкой книг — будем учитывать только книги с 50 и более оценками;
* Посчитать среднее количество обзоров от пользователей, которые поставили больше 48 оценок.

### Описание данных
База данных содержит информацию о книгах, издательствах, авторах, а также пользовательские обзоры книг. Схема предоставленной базы данных:
![image](https://github.com/user-attachments/assets/43472c2a-1fdf-4bb4-8449-9860c3059ad9)

#### Описание данных, которые хранят таблицы:
Таблица `books` содержит данные о книгах:
* `book_id` — идентификатор книги;
* `author_id` — идентификатор автора;
* `title` — название книги;
* `num_pages` — количество страниц;
* `publication_date` — дата публикации книги;
* `publisher_id` — идентификатор издателя.

Таблица `authors` содержит данные об авторах:
* `author_id` — идентификатор автора;
* `author` — имя автора.

Таблица `publishers` содержит данные об издательствах:
* `publisher_id` — идентификатор издательства;
* `publisher` — название издательства;

Таблица `ratings` содержит данные о пользовательских оценках книг:
* `rating_id` — идентификатор оценки;
* `book_id` — идентификатор книги;
* `username` — имя пользователя, оставившего оценку;
* `rating` — оценка книги.

Таблица `reviews` содержит данные о пользовательских обзорах:
* `review_id` — идентификатор обзора;
* `book_id` — идентификатор книги;
* `username` — имя автора обзора;
* `text` — текст обзора.

### Результаты работы
Результаты оформленны в виде отчета в тетрадке Jupyter Notebook. [Ссылка на тетрадку]()

## Используемые библиотеки и инструменты
*pandas*, *numpy* *seaborn*, *matplotlib*, *math*, *scipy*, *statistics*, *sys*, *phik*,  \
*SQL*, *Работа с SQL с помощью python в Jupyter Notebook*, *MS Power Point*
